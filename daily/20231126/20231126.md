# ğŸ“ 2023ë…„ 11ì›” 26ì¼ ê¸°ë¡

## ê³µí†µì˜ ì €ì£¼

---------

> dry ì›ì¹™ì´ë¼ë©° ë°˜ë³µë˜ëŠ” UIëŠ” **ê³µí†µ** ìœ¼ë¡œ ë¶„ë¦¬í•´ì•¼ í•œë‹¤ëŠ” ë”ì°í•œ ì €ì£¼

ê³µí†µ Input component ê°€ ìˆë‹¤ê³  ìƒìƒí•´ë³´ì.
```typescript jsx
// ê³µí†µ input

type InputProps = InputHTMLAttributes<HTMLInputElement>;

export const Input = ({ type, ...props }: InputProps) => {
  const [input, setInput] = useState('');

  const handleChangeInput = (e: React.ChangeEvent<HTMLInputElement>) => {
    setInput(e.target.value);
  };

  return <input {...props} type={type} onChange={handleChangeInput} value={input} />;
};
```

### ìš”êµ¬ì‚¬í•­ 1. íšŒì›ê°€ì…ì„ í•  ë•Œë§Œ validation ì„ ë‹¬ì•„ì£¼ê³  ì‹¶ì–´ìš”.
ğŸ¤”: íšŒì›ê°€ì…ì¸ ê²½ìš°ì—ë§Œ valid í•  ë•Œ ìŠ¤íƒ€ì¼ì„ ì¶”ê°€í•˜ë©´ ë˜ì§€ ì•Šì„ê¹Œ ?

```typescript jsx
type InputProps = {
  inputType: 'signup' | 'signin';
  isValid?: boolean;
} & InputHTMLAttributes<HTMLInputElement>;

export const Input = ({ type, inputType, isValid, ...props }: InputProps) => {
  const [input, setInput] = useState('');

  const handleChangeInput = (e: React.ChangeEvent<HTMLInputElement>) => {
    setInput(e.target.value);
  };

  return (
    <>
      <input {...props} type={type} onChange={handleChangeInput} value={input} />
      {inputType === 'signup' && isValid === false ? <div>ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div> : null}
    </>
  );
};

```

> `inputType` , `isValid` ê°€ ìƒê²¼ë‹¤ !

### ìš”êµ¬ì‚¬í•­ 2. í¬ì¸íŠ¸ë¥¼ ë³´ì—¬ì¤˜ìš” !
![img.png](img.png)

```typescript jsx
type InputProps = {
  inputType: 'signup' | 'signin' | 'point';
  isValid?: boolean;
  currentHasPoint: number;
} & InputHTMLAttributes<HTMLInputElement>;

export const Input = ({ type, inputType, isValid, ...props }: InputProps) => {
  const [input, setInput] = useState('');

  const handleChangeInput = (e: React.ChangeEvent<HTMLInputElement>) => {
    if(inputType === 'point') {
   		const validPointInput = Number(e.target.value.replace(/[^0-9]+/g, ''));

        if (validPointInput > currentHasPoint) {
          alert(`ì´ìš©ê°€ëŠ¥í•œ í¬ì¸íŠ¸ëŠ” ${currentHasPoint}ì…ë‹ˆë‹¤.`);
          setInput(currentHasPoint);
          return;
        }

        setInput(validPointInput);
        return;
    }
    
    setInput(e.target.value);
  };
  
  const inputFormat = inputType === 'point' ? `${input.toLocaleString()}P` : input;

  return (
    <>
      <input {...props} type={type} onChange={handleChangeInput} value={inputFormat} />
      {inputType === 'signup' && isValid === false ? <div>ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div> : null}
    </>
  );
};
```

### ë­”ê°€ ì´ìƒí•´
ê³µí†µ Inputìœ¼ë¡œ ë¡œê·¸ì¸, íšŒì›ê°€ì…, í¬ì¸íŠ¸ í¼ìœ¼ë¡œ í™œìš©í–ˆì–´ìš”.
- GOOD: ê³µí†µ Input í•˜ë‚˜ë§Œìœ¼ë¡œ ì—¬ëŸ¬ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±ì‹œì¼°ì–´ìš”
- BAD: ì—¬ëŸ¬ ìš”êµ¬ì‚¬í•­ì„ í•œë²ˆì— ì²˜ë¦¬í•˜ë ¤ë³´ë‹ˆ, ê³µí†µ Inputì´ ë„ˆë¬´ë‚˜ ë§ì€ ê¸°ëŠ¥ì„ í•˜ê³  ìˆì–´ìš”.

### ì •ë¦¬í•˜ìë©´,
- ìš°ë¦¬ëŠ” button, input ì„ ê³µí†µìœ¼ë¡œ ë§ì´ ë§Œë“œë ¤ê³  í•´ìš”.
- inputì„ ê³µí†µìœ¼ë¡œ ë§Œë“œëŠ”ê²Œ ì¢‹ë‹¤ê³  í•´ì„œ, ë¹„ìŠ·í•œ uië“¤ì„ ê³µí†µìœ¼ë¡œ ë§ì¶”ê¸° ìœ„í•´ ì–µì§€ë¡œ ê³µí†µ input íƒœê·¸ì— ì—¬ëŸ¬ ê¸°ëŠ¥ì´ ë•ì§€ë•ì§€ ë„£ì–´ì§€ê²Œ ë¼ìš”.

### í•´ê²°ë°©ë²•
- UIë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê³µí†µìœ¼ë¡œ ë¬¶ìœ¼ë ¤ëŠ” ê²ƒì„ `ë„ë©”ì¸ (=== ê´€ì‹¬ì‚¬)` ìœ¼ë¡œ ë°”ë¼ë³´ë©´ ë©ë‹ˆë‹¤.
- `ë¡œê·¸ì¸` inputê³¼ `í¬ì¸íŠ¸` input 2ê°œì˜ ë„ë©”ì¸ì€ ê´€ì‹¬ì‚¬ê°€ ë‹¬ë¼ìš”.
- ë™ì¼í•œ UIë¡œ ë³´ì´ì§€ë§Œ, ì¶”í›„ì— ë‘˜ ì¤‘ í•˜ë‚˜ì— ê¸°ëŠ¥ì´ ì¶”ê°€ë  ìˆ˜ ìˆê³  UIê°€ ë³€í•  ìˆ˜ë„ ìˆì–´ìš”.
- ê·¸ë ‡ê¸° ë•Œë¬¸ì— `LoginInput`, `PointInput` ê³¼ ê°™ì´ ë™ì¼í•œ UIë¥¼ ê°€ì§€ì§€ë§Œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.
- ì´ëŸ¬í•œ ê´€ì ì„ `Headless Component` ë¼ê³  í•©ë‹ˆë‹¤.

### Headless Component
- ê¸°ëŠ¥ì„ ê°€ì§€ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸.
- Headless Component + custom hook ì¡°í•©ì€ ì•„ë˜ì™€ ê°™ì•„ìš”.

`Input`
```typescript jsx
// ìŠ¤íƒ€ì¼ì´ ì ìš©ë˜ìˆë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤.

interface InputProps<T> extends InputHTMLAttributes<HTMLInputElement> {
  input: T
}

export const Input = <T,>({ type, input ...props }: InputProps<T>) => {
  return <input {...props} type={type} onChange={handleChangeInput} value={input} />;
};

```

`LoginInput`
```typescript jsx
export const useLoginInput = () => {
	const [input, setInput] = useState('');
	const isValid = input.length > 8;

    const handleChangeInput = (e: React.ChangeEvent<HTMLInputElement>) => {
        setInput(e.target.value);
    };
  
  	return {input, isValid, handleChangeInput};
}

export const LoginInput = () => {
  const {input, isValid, handleChangeInput} = useLoginInput();
  
  return (
  	<>
    	<Input input={input} onChange={handleChangeInput} type="text"/>
      	{!isValid ? <div>ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<div> : null}
    </>
  )
}
```

`PointInput`
```typescript jsx
export const usePointInput = () => {
	const [input, setInput] = useState('');

    const handleChangeInput = (e: React.ChangeEvent<HTMLInputElement>) => {
        const validPointInput = Number(e.target.value.replace(/[^0-9]+/g, ''));

        if (validPointInput > currentHasPoint) {
          alert(`ì´ìš©ê°€ëŠ¥í•œ í¬ì¸íŠ¸ëŠ” ${currentHasPoint}ì…ë‹ˆë‹¤.`);
          setInput(currentHasPoint);
          return;
        }

        setInput(validPointInput);
        return;
    };
  
  	const inputFormat = `${input.toLocaleString()}P`;
  
  	return {inputFormat, handleChangeInput};
}

export const PointInput = () => {
  const {inputFormat, handleChangeInput} = useLoginInput();
  
  return (
  	<>
    	<Input input={inputFormat} onChange={handleChangeInput} type="number" />
    </>
  )
}

```
